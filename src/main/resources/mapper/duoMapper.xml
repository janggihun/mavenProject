<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.project.projectFinal.dao.DuoDao">
	<select id="duoInfo">

		select * from duoT order by dcnt desc limit 10;

	</select>

	<select id="infoDuoT">

		select * from duoT where dcnt = #{dcnt};

	</select>

	<select id="comparedcnt">

		select * from duoT order by dcnt desc limit 1;

	</select>

	<select id="saveDbDuo">

		insert into
		duoT(userId,myPosition,tier,duoPosition,gameType,memo)
		values(#{userId},#{myPosition},#{tier},#{duoPosition},#{gameType},#{memo});

		select * from duoT order by dcnt desc limit 1;

	</select>

	<select id="nowlogin">

		select userId , loginNow from memberT where userId =
		#{friendId};

	</select>

	<select id="createChattRoom">

		insert into duoChattRoomT
		values(null,#{roomNum},#{hostId},#{guestId});


		delete from duoT where
		dcnt = #{roomNum};


		select * from duoChattRoomT
		order by cnt desc limit
		1;
	</select>


	<select id="msgSave">
		insert into msgT(rcnt,userId,msg)
		values(#{rcnt},#{userId},#{msg});

		select * from msgT where rcnt =
		#{rcnt} order by rcnt desc limit 1;
	</select>

	<select id="msgRead">
		select * from msgT where rcnt = #{rcnt} order by
		autocnt desc limit 1;
	</select>

	<select id="msgAll">
		select * from msgT where rcnt = #{rcnt} order by
		autocnt
	</select>
	<select id="myRoomCheck">
		select * from duoChattRoomT where roomNum =
		#{roomNum}
	</select>
	<select id="chattRoomInfo">
		select * from duoChattRoomT where (hostId = #{userId}
		|| guestId = #{userId}) order by roomNum desc
	</select>

	<update id="goOutRoomGuest">

		update duoChattRoomT set guestId = '' where roomNum =
		#{roomNum}

	</update>

	<update id="goOutRoomHost">

		update duoChattRoomT set hostId = '' where roomNum =
		#{roomNum}

	</update>
	<delete id="deleteChattRoom">

		delete from duoChattRoomT where roomNum=#{roomNum}

	</delete>
</mapper>
