<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.projectFinal.dao.RiotGameDao">
	<insert id="RiotGameInfo">
		insert IGNORE into RiotGameInfoT values
		(#{matchId},#{championName},default,#{riotIdGameName},
		#{riotIdTagline},#{summonerName},#{summonerLevel},#{profileIcon},#{participantId},#{queueId},#{teamId},
		#{item0},#{item1},#{item2},#{item3},#{item4},#{item5},#{summoner1Id},#{summoner2Id},
		default,default,#{lane},#{kills},
		#{assists},#{deaths},#{kda},#{firstBloodKill},#{gameEndTimestamp},
		#{gameStartTimestamp},#{totalAllyJungleMinionsKilled},#{totalDamageDealtToChampions},
		#{totalDamageTaken},#{totalEnemyJungleMinionsKilled},#{totalMinionsKilled},
		#{wardsKilled},#{wardsPlaced},#{win});


		update RiotGameInfoT R
		join
		champName2 C
		on R.championName = C.champion_name
		set R.champion_name_kr
		= C.champion_name_kr
		where R.matchId = #{matchId};

		update RiotGameInfoT R
		join RiotGameSpellT S
		on R.summoner1Id = S.summonerId
		set R.summonerSpellD = S.spellName;

		update RiotGameInfoT R
		join RiotGameSpellT S
		on R.summoner2Id = S.summonerId
		set R.summonerSpellF = S.spellName;
	</insert>
	<insert id="RiotGameTeams">
		insert IGNORE into RiotGameTeamsT values
		(#{matchId},#{teamId},#{kills},#{dragon});
	</insert>
	<insert id="RiotGameBans">
		insert IGNORE into RiotGameBansT values
		(#{matchId},#{championId},#{teamId});
	</insert>
	<select id="RiotGameInfoSelect">
		select * from RiotGameInfoT where matchId =
		#{matchId} order by participantId asc;
	</select>
	<select id="RiotGameTeamsSelect">
		select * from RiotGameTeamsT where matchId =
		#{matchId}
	</select>
	<select id="RiotGameBansSelect">
		select * from RiotGameBansT where matchId =
		#{matchId}
	</select>
	<select id="DBRiotGameMatchSelect">
		select matchId from RiotGameInfoT where
		riotIdGameName =#{gameName} group by
		matchId;
	</select>
	<select id="DbriotGameData">
		select * from RiotGameInfoT where matchId =
		#{matchId}
	</select>
	<select id="getMatchId">
		select count(*) from RiotGameInfoT where matchId =
		#{matchId}
	</select>
</mapper>